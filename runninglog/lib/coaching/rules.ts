import type { CoachingRule } from './types';

/**
 * 코칭 룰 목록 — priority 오름차순으로 평가, 첫 매칭 룰 사용
 *
 * 페르소나 정의: ./persona.ts 참고
 * 새 멘트 작성 시 TONE_RULES, COACHING_PRINCIPLES를 기준으로 작성
 */
export const COACHING_RULES: CoachingRule[] = [
  // ─── 첫 사용 ────────────────────────────────────────────────
  {
    id: 'first-time',
    category: '첫 사용',
    priority: 10,
    condition: (ctx) => !ctx.hasActivities,
    messages: [
      '반가워요! 러닝로그와 함께 첫 걸음을 시작해볼까요? 가볍게 걷기부터도 충분히 멋져요.',
      '안녕하세요! 오늘이 러닝 여정의 첫 날이 될 수 있어요. 부담 없이, 나를 위한 시간을 만들어보는 건 어떨까요?',
      '처음 오셨군요! 거리도, 속도도 중요하지 않아요. 밖으로 나가는 것 자체가 대단한 시작이에요.',
      '환영해요! 달리기는 나를 돌보는 가장 쉬운 방법이에요. 편한 운동화만 신으면 준비 끝이에요.',
      '만나서 반가워요! 짧은 산책이든, 가벼운 조깅이든, 첫 기록을 함께 남겨볼까요?',
    ],
  },

  // ─── 장기 부재 (14일+) ──────────────────────────────────────
  {
    id: 'long-absence-14',
    category: '장기 부재',
    priority: 20,
    condition: (ctx) => ctx.daysSinceLastRun >= 14,
    messages: [
      '오랜만이에요! 쉬는 것도 훈련의 일부예요. 준비가 되면, 가벼운 조깅부터 다시 시작해보는 건 어떨까요?',
      '다시 돌아오셨군요! 몸이 기억하고 있으니 걱정 마세요. 천천히, 나만의 속도로 다시 시작하면 돼요.',
      '잘 쉬셨나요? 충분히 쉬었다면, 오늘 짧은 산책이라도 나가보는 건 어떨까요? 바깥 공기가 좋을 거예요.',
      '다시 만나서 반가워요! 얼마나 쉬었든 상관없어요. 오늘 운동화를 신는 것만으로도 멋진 재시작이에요.',
      '오래 쉬었다고 조급해하지 않아도 돼요. 몸이 원하는 만큼, 가볍게 움직여보는 것부터 시작해볼까요?',
    ],
  },

  // ─── 장기 부재 (7일+) ──────────────────────────────────────
  {
    id: 'long-absence-7',
    category: '장기 부재',
    priority: 25,
    condition: (ctx) => ctx.daysSinceLastRun >= 7,
    messages: [
      '일주일 정도 쉬셨네요. 괜찮아요, 러닝은 항상 기다려주니까요. 오늘 가볍게 나가볼까요?',
      '며칠 쉬었다고 해서 달라지는 건 없어요. 몸이 원할 때, 편하게 다시 시작해보세요.',
      '잠시 쉬어가는 것도 좋은 선택이에요. 다시 달리고 싶은 마음이 들면, 로기가 항상 여기 있을게요.',
      '일주일간 충분히 쉬셨으니 몸이 가벼울 거예요. 오늘 10분만 나를 위해 걸어보는 건 어떨까요?',
      '쉬는 동안 몸이 회복되었을 거예요. 부담 없이, 기분 좋은 만큼만 움직여보세요.',
    ],
  },

  // ─── 연속 7일+ ──────────────────────────────────────────────
  {
    id: 'streak-7',
    category: '연속 달리기',
    priority: 30,
    condition: (ctx) => ctx.consecutiveRunDays >= 7,
    messages: [
      '{{streak}}일 연속으로 달리고 있어요! 정말 대단해요. 하지만 몸의 신호도 잘 들어주세요. 휴식도 실력이에요.',
      '벌써 {{streak}}일 연속이라니! 꾸준함이 가장 큰 재능이에요. 오늘 몸이 피곤하다면 가벼운 산책으로 대신해도 괜찮아요.',
      '{{streak}}일째 멈추지 않고 달리고 있네요! 자신과의 약속을 지켜가는 모습이 정말 멋져요.',
      '연속 {{streak}}일! 놀라운 꾸준함이에요. 오늘은 평소보다 천천히 달리며 몸을 돌봐주는 건 어떨까요?',
      '{{streak}}일 연속 러닝, 정말 자랑스러워요! 이 흐름을 유지하면서도 몸이 보내는 신호에 귀 기울여주세요.',
    ],
  },

  // ─── 연속 3일+ ──────────────────────────────────────────────
  {
    id: 'streak-3',
    category: '연속 달리기',
    priority: 35,
    condition: (ctx) => ctx.consecutiveRunDays >= 3,
    messages: [
      '{{streak}}일 연속으로 달리고 있네요! 이 흐름, 정말 멋져요. 오늘도 나를 위한 시간을 보내보세요.',
      '연속 {{streak}}일째! 꾸준한 걸음이 쌓이고 있어요. 오늘 컨디션은 어떠세요?',
      '{{streak}}일째 연속으로 달리다니, 습관이 만들어지고 있어요! 이 리듬을 즐겨보세요.',
      '매일 달리는 당신, 정말 멋져요! {{streak}}일째 이어가고 있네요. 오늘도 즐거운 러닝 되세요.',
      '{{streak}}일 연속! 작은 습관이 큰 변화를 만들어요. 오늘도 나만의 페이스로 달려보세요.',
    ],
  },

  // ─── 목표 달성 ──────────────────────────────────────────────
  {
    id: 'goal-achieved',
    category: '목표 달성',
    priority: 40,
    condition: (ctx) => ctx.goal?.is_achieved === true,
    messages: [
      '이번 달 목표를 달성했어요! 스스로에게 약속을 지켜낸 당신이 정말 자랑스러워요.',
      '축하해요! 목표를 달성했네요. 이 성취감, 꼭 기억해두세요. 당신은 해낼 수 있는 사람이에요.',
      '목표 달성! 정말 대단해요. 달성한 기분을 충분히 누리고, 스스로에게 작은 보상을 해주는 건 어떨까요?',
      '이번 달 목표, 해냈어요! 매일의 노력이 모여 이뤄낸 결과예요. 정말 수고 많았어요.',
      '와, 목표를 이뤄냈군요! 이 기쁨을 온전히 느껴보세요. 다음 달에도 함께 도전해봐요!',
    ],
  },

  // ─── 목표 80%+ ──────────────────────────────────────────────
  {
    id: 'goal-almost',
    category: '목표 근접',
    priority: 45,
    condition: (ctx) =>
      ctx.goal != null && !ctx.goal.is_achieved && ctx.goal.progress_percent >= 80,
    messages: [
      '이번 달 목표의 {{goalProgress}}%를 달성했어요! 거의 다 왔어요. 이 페이스라면 충분히 가능해요.',
      '목표까지 얼마 남지 않았어요! {{goalProgress}}% 진행 중이에요. 마지막까지 나만의 속도로 달려보세요.',
      '{{goalProgress}}% 달성! 목표가 코앞이에요. 조금만 더 힘내볼까요? 로기가 응원하고 있어요.',
      '거의 다 왔어요! {{goalProgress}}%까지 달성했네요. 남은 거리도 충분히 해낼 수 있어요.',
      '이번 달 목표의 {{goalProgress}}%를 채웠어요. 끝까지 포기하지 않는 모습이 정말 멋져요!',
    ],
  },

  // ─── 목표 40%+ ──────────────────────────────────────────────
  {
    id: 'goal-halfway',
    category: '목표 진행',
    priority: 50,
    condition: (ctx) =>
      ctx.goal != null && !ctx.goal.is_achieved && ctx.goal.progress_percent >= 40,
    messages: [
      '이번 달 목표의 {{goalProgress}}%를 달성했어요. 절반 가까이 왔네요! 한 걸음씩 나아가고 있어요.',
      '목표를 향해 착실히 나아가고 있어요. {{goalProgress}}% 진행 중! 꾸준함이 답이에요.',
      '{{goalProgress}}%까지 왔어요! 서두르지 않아도 괜찮아요. 나만의 페이스가 가장 좋은 페이스예요.',
      '목표의 절반 가까이 달성했어요! {{goalProgress}}%! 이 흐름이면 충분히 도달할 수 있어요.',
      '{{goalProgress}}% 진행 중이에요. 매번 달릴 때마다 목표에 한 발짝 더 가까워지고 있어요.',
    ],
  },

  // ─── 주 5회+ ────────────────────────────────────────────────
  {
    id: 'weekly-5plus',
    category: '주간 빈도',
    priority: 60,
    condition: (ctx) => ctx.weeklyRunCount >= 5,
    messages: [
      '이번 주에 벌써 {{weeklyCount}}번이나 달렸어요! 정말 열심이시네요. 충분한 휴식도 꼭 챙겨주세요.',
      '주 {{weeklyCount}}회 러닝, 대단해요! 러닝 후 스트레칭과 수분 보충도 잊지 말고 해주세요.',
      '이번 주 {{weeklyCount}}번째! 열정이 대단해요. 몸이 피곤하다면 오늘은 가벼운 회복 러닝도 좋아요.',
      '{{weeklyCount}}회나 달린 한 주! 정말 멋져요. 내일은 몸을 쉬게 해주는 것도 좋은 훈련이에요.',
      '이번 주 {{weeklyCount}}번 러닝! 꾸준함이 빛나는 한 주예요. 회복도 실력의 일부라는 거, 잊지 마세요.',
    ],
  },

  // ─── 주 3회+ ────────────────────────────────────────────────
  {
    id: 'weekly-3plus',
    category: '주간 빈도',
    priority: 65,
    condition: (ctx) => ctx.weeklyRunCount >= 3,
    messages: [
      '이번 주 {{weeklyCount}}번째 러닝! 좋은 리듬을 유지하고 있어요. 오늘도 즐거운 러닝 되세요.',
      '이번 주에 {{weeklyCount}}번 달렸네요. 꾸준함이 빛나는 한 주예요!',
      '{{weeklyCount}}번째 러닝! 매번 나가는 게 쉽지 않은데, 정말 잘하고 있어요.',
      '이번 주 {{weeklyCount}}회! 안정적인 러닝 습관이 만들어지고 있네요. 이 리듬이 좋아요.',
      '주 {{weeklyCount}}회 러닝 중이에요. 무리하지 않으면서 즐기는 게 가장 좋은 방법이에요.',
    ],
  },

  // ─── 오늘 달림 ──────────────────────────────────────────────
  {
    id: 'ran-today',
    category: '오늘 달림',
    priority: 70,
    condition: (ctx) => ctx.daysSinceLastRun === 0,
    messages: [
      '오늘 {{distance}}km를 달렸어요! 수고했어요. 나를 위해 시간을 내준 게 정말 멋져요.',
      '{{distance}}km 완주! 달린 후 충분히 수분을 보충해주세요. 오늘도 고생 많았어요.',
      '오늘도 달려주셨네요! {{distance}}km, 매 걸음이 나를 더 건강하게 만들어주고 있어요.',
      '{{distance}}km를 달리는 동안 온전히 나에게 집중한 시간, 정말 소중했을 거예요. 수고했어요!',
      '오늘 {{distance}}km 완주! 페이스가 어떻든, 끝까지 달린 당신이 대단해요.',
    ],
  },

  // ─── 어제 달림 ──────────────────────────────────────────────
  {
    id: 'ran-yesterday',
    category: '어제 달림',
    priority: 75,
    condition: (ctx) => ctx.daysSinceLastRun === 1,
    messages: [
      '어제 {{distance}}km를 달렸죠! 오늘은 가벼운 회복 러닝이나 스트레칭은 어떨까요?',
      '어제의 러닝, 잘했어요! 오늘 몸 상태는 어떠세요? 컨디션에 맞게 움직여보세요.',
      '어제 달린 여운이 남아있을 거예요. 오늘은 몸이 원하는 만큼만 가볍게 움직여볼까요?',
      '어제 {{distance}}km를 달렸네요! 오늘은 휴식을 취하며 몸을 돌봐주는 것도 좋아요.',
      '어제의 노력이 몸에 쌓이고 있어요. 오늘은 무리하지 말고, 나를 아끼는 하루를 보내세요.',
    ],
  },

  // ─── 단기 부재 (2-6일) ──────────────────────────────────────
  {
    id: 'short-absence',
    category: '단기 부재',
    priority: 80,
    condition: (ctx) => ctx.daysSinceLastRun >= 2 && ctx.daysSinceLastRun <= 6,
    messages: [
      '마지막 러닝이 {{daysSinceLastRun}}일 전이에요. 오늘 가볍게 나가보는 건 어떨까요?',
      '{{daysSinceLastRun}}일 쉬었으니 몸이 가벼울 거예요. 오늘 기분 좋은 러닝 한번 어때요?',
      '며칠 쉬었다고 걱정하지 마세요. 쉬는 것도 달리기의 일부예요. 준비되면 다시 시작해봐요.',
      '{{daysSinceLastRun}}일 만에 다시 달려볼까요? 딱 10분만이라도 괜찮아요. 나를 위한 시간이니까요.',
      '마지막 러닝 후 {{daysSinceLastRun}}일이 지났어요. 억지로 뛰지 않아도 괜찮아요. 가벼운 산책부터 시작해볼까요?',
    ],
  },

  // ─── 누적 500km+ ────────────────────────────────────────────
  {
    id: 'total-500km',
    category: '누적 거리 이정표',
    priority: 83,
    condition: (ctx) => ctx.totalDistance != null && ctx.totalDistance >= 500,
    messages: [
      '누적 {{totalDistance}}km! 500km를 넘다니, 당신은 진짜 러너예요. 매 걸음이 대단해요.',
      '{{totalDistance}}km의 여정! 이 숫자 뒤에 숨은 노력과 시간을 로기는 알고 있어요.',
      '누적 {{totalDistance}}km 달성! 한 걸음 한 걸음이 모여 이만큼 왔어요. 정말 자랑스러워요.',
      '벌써 {{totalDistance}}km를 달렸네요! 이 여정을 함께할 수 있어서 로기도 행복해요.',
      '{{totalDistance}}km의 발자국! 포기하지 않고 달려온 당신에게 박수를 보내요.',
    ],
  },

  // ─── 누적 100km+ ────────────────────────────────────────────
  {
    id: 'total-100km',
    category: '누적 거리 이정표',
    priority: 85,
    condition: (ctx) =>
      ctx.totalDistance != null && ctx.totalDistance >= 100 && ctx.totalDistance < 500,
    messages: [
      '누적 {{totalDistance}}km를 달렸어요! 100km를 넘긴 건 정말 대단한 일이에요.',
      '벌써 {{totalDistance}}km! 한 걸음 한 걸음이 모여 이만큼 왔어요. 자랑스러워해도 좋아요.',
      '{{totalDistance}}km 달성! 꾸준히 달려온 시간들이 이 숫자를 만들었어요. 정말 멋져요.',
      '누적 {{totalDistance}}km! 처음 시작할 때를 생각하면 정말 많이 왔죠? 대단해요.',
      '{{totalDistance}}km의 기록! 매번 달릴 때마다 조금씩 더 강해지고 있어요.',
    ],
  },

  // ─── 아침 인사 ──────────────────────────────────────────────
  {
    id: 'morning-greeting',
    category: '시간대 인사',
    priority: 90,
    condition: (ctx) => ctx.timeOfDay === 'morning',
    messages: [
      '좋은 아침이에요! 상쾌한 아침 공기를 마시며 달려보는 건 어떨까요?',
      '아침 러닝은 하루를 활기차게 시작하는 좋은 방법이에요. 오늘도 좋은 하루 보내세요!',
      '오늘 아침, 나를 위한 시간을 만들어볼까요? 짧은 달리기도 하루를 바꿔줄 거예요.',
      '상쾌한 아침이에요! 가볍게 몸을 움직이면 하루가 더 즐거워질 거예요.',
      '좋은 아침! 오늘 하루의 시작을 러닝과 함께해보는 건 어떨까요?',
    ],
  },

  // ─── 오후 인사 ──────────────────────────────────────────────
  {
    id: 'afternoon-greeting',
    category: '시간대 인사',
    priority: 91,
    condition: (ctx) => ctx.timeOfDay === 'afternoon',
    messages: [
      '오후에도 활기차게! 점심 후 가벼운 러닝으로 에너지를 충전해보는 건 어떨까요?',
      '오후의 여유로운 러닝도 좋아요. 나만의 페이스로 즐겨보세요.',
      '오후 시간, 잠깐 밖에 나가서 걸어보는 것만으로도 기분이 달라질 거예요.',
      '점심 후 나른한 시간이죠? 가벼운 산책이나 러닝으로 활력을 되찾아보세요.',
      '오후의 달리기는 머리를 맑게 해줘요. 오늘 잠깐 나를 위한 시간을 내볼까요?',
    ],
  },

  // ─── 저녁 인사 ──────────────────────────────────────────────
  {
    id: 'evening-greeting',
    category: '시간대 인사',
    priority: 92,
    condition: (ctx) => ctx.timeOfDay === 'evening',
    messages: [
      '하루 수고 많았어요! 저녁 러닝으로 하루를 마무리해보는 건 어떨까요?',
      '저녁 공기를 마시며 달리면 스트레스가 풀릴 거예요. 오늘 하루도 잘 보냈어요!',
      '하루를 마무리하며 가볍게 달려보세요. 저녁 러닝은 마음을 차분하게 해줘요.',
      '저녁 시간, 나를 위한 달리기는 어떨까요? 하루의 피로가 씻겨나갈 거예요.',
      '오늘 하루도 수고했어요! 저녁 바람을 맞으며 천천히 달려보는 건 어떨까요?',
    ],
  },

  // ─── 밤 인사 ────────────────────────────────────────────────
  {
    id: 'night-greeting',
    category: '시간대 인사',
    priority: 93,
    condition: (ctx) => ctx.timeOfDay === 'night',
    messages: [
      '늦은 시간이네요. 오늘 충분히 쉬고, 내일 에너지 넘치는 러닝을 준비해볼까요?',
      '좋은 밤이에요! 푹 쉬는 것도 좋은 훈련이에요. 내일 또 만나요.',
      '오늘 하루 수고했어요. 편안한 밤 보내시고, 내일도 로기가 함께할게요.',
      '늦은 밤이에요. 충분히 자는 것도 러닝 실력을 키우는 방법이에요. 좋은 꿈 꾸세요!',
      '오늘 밤은 편안하게 쉬세요. 내일 또 함께 달릴 수 있기를 기대하고 있을게요.',
    ],
  },

  // ─── 기본 (폴백) ────────────────────────────────────────────
  {
    id: 'default',
    category: '기본',
    priority: 999,
    condition: () => true,
    messages: [
      '오늘도 로기와 함께해요! 나를 위한 러닝, 언제든 준비되어 있어요.',
      '러닝은 나를 돌보는 시간이에요. 오늘 컨디션에 맞게 움직여보세요.',
      '당신의 페이스가 정답이에요. 비교 없이, 나만의 걸음으로 달려보세요.',
      '오늘도 좋은 하루예요! 달리고 싶을 때 언제든 로기가 함께할게요.',
      '작은 걸음이든, 긴 달리기든, 움직이는 모든 순간이 소중해요. 오늘도 힘내세요!',
    ],
  },
];
